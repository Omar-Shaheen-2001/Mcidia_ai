{% extends 'admin/base.html' %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-12">
            <h1>ğŸ¤– {{ 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ' if lang == 'ar' else 'AI Settings' }}</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <div class="list-group sticky-top">
                <a href="{{ url_for('settings_admin.general_settings') }}" class="list-group-item list-group-item-action">
                    <i class="fas fa-sliders-h"></i> {{ 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©' if lang == 'ar' else 'General Settings' }}
                </a>
                <a href="{{ url_for('settings_admin.branding_settings') }}" class="list-group-item list-group-item-action">
                    <i class="fas fa-palette"></i> {{ 'Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ©' if lang == 'ar' else 'Branding' }}
                </a>
                <a href="{{ url_for('settings_admin.ai_settings') }}" class="list-group-item list-group-item-action active">
                    <i class="fas fa-brain"></i> {{ 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ' if lang == 'ar' else 'AI Settings' }}
                </a>
                <a href="{{ url_for('settings_admin.backup_settings') }}" class="list-group-item list-group-item-action">
                    <i class="fas fa-database"></i> {{ 'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©' if lang == 'ar' else 'Backup & Maintenance' }}
                </a>
            </div>
        </div>

        <div class="col-md-9">
            <div class="card shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h5 class="m-0">ğŸ¤– {{ 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø²ÙˆØ¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ' if lang == 'ar' else 'AI Provider Settings' }}</h5>
                </div>
                <div class="card-body">
                    <form id="aiForm" method="POST">
                        <div class="form-group">
                            <label>{{ 'Ø§Ù„Ù…Ø²ÙˆØ¯' if lang == 'ar' else 'AI Provider' }}</label>
                            <select class="form-control" name="ai_provider">
                                <option value="openai" {% if settings.ai_provider == 'openai' %}selected{% endif %}>OpenAI</option>
                                <option value="ollama" {% if settings.ai_provider == 'ollama' %}selected{% endif %}>Ollama</option>
                                <option value="anthropic" {% if settings.ai_provider == 'anthropic' %}selected{% endif %}>Anthropic</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>{{ 'Ø§Ù„Ù†Ù…ÙˆØ°Ø¬' if lang == 'ar' else 'Model' }}</label>
                            <input type="text" class="form-control" name="ai_model" value="{{ settings.ai_model or 'gpt-3.5-turbo' }}">
                        </div>

                        <div class="form-group">
                            <label>{{ 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Temperature)' if lang == 'ar' else 'Temperature' }} (0-1)</label>
                            <input type="number" class="form-control" name="ai_temperature" min="0" max="1" step="0.1" value="{{ settings.ai_temperature or 0.7 }}">
                            <small class="form-text text-muted">{{ 'Ù‚ÙŠÙ…Ø© Ø£Ø¹Ù„Ù‰ = Ø¥Ø¬Ø§Ø¨Ø§Øª Ø£ÙƒØ«Ø± Ø¥Ø¨Ø¯Ø§Ø¹Ø§Ù‹' if lang == 'ar' else 'Higher = More creative responses' }}</small>
                        </div>

                        <div class="form-group">
                            <label>{{ 'Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø±Ù…ÙˆØ²' if lang == 'ar' else 'Max Tokens' }}</label>
                            <input type="number" class="form-control" name="ai_max_tokens" value="{{ settings.ai_max_tokens or 2000 }}">
                        </div>

                        <button type="submit" class="btn btn-primary">{{ 'Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' if lang == 'ar' else 'Save Settings' }}</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('aiForm').addEventListener('submit', function(e) {
    e.preventDefault();
    fetch('{{ url_for("settings_admin.ai_settings") }}', {
        method: 'POST',
        body: new FormData(this)
    })
    .then(r => r.json())
    .then(d => {
        if (d.success) {
            alert('{{ "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­" if lang == "ar" else "Saved successfully" }}');
        }
    });
});
</script>
{% endblock %}
